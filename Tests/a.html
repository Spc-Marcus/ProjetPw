<!DOCTYPE html>
<html>
<head>
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
    }
    th {
      background-color: #f2f2f2;
    }
    .hidden {
      display: none;
    }
  </style>
  <script>
    function filtrerParVille() {
      var ville = document.getElementById('selectVille').value;
      var tableau = document.getElementById('tableau-donnees');
      var lignes = Array.from(tableau.rows).slice(1); // Ignorer la première ligne (en-têtes)
      var aucuneVilleMsg = document.getElementById('aucune-ville-msg');

      // Afficher toutes les lignes
      lignes.forEach(function(ligne) {
        ligne.style.display = '';
      });

      if (ville !== 'toutes') {
        // Masquer les lignes qui ne correspondent pas à la ville sélectionnée
        lignes.forEach(function(ligne) {
          var celluleVille = ligne.cells[2];
          if (celluleVille.textContent.trim() !== ville) {
            ligne.style.display = 'none';
          }
        });

        // Afficher le message "Aucune ville ne correspond à votre demande" si aucune ligne ne correspond
        var lignesVisibles = lignes.filter(function(ligne) {
          return ligne.style.display !== 'none';
        });

        if (lignesVisibles.length === 0) {
          aucuneVilleMsg.classList.remove('hidden');
        } else {
          aucuneVilleMsg.classList.add('hidden');
        }
      } else {
        // Réinitialiser l'affichage du message lorsque "Toutes les villes" sont sélectionnées
        aucuneVilleMsg.classList.add('hidden');
      }
    }

    function trierParColonne(colonne) {
      var tableau = document.getElementById('tableau-donnees');
      var entetes = tableau.tHead.rows[0].cells;
      var indexColonne = Array.from(entetes).indexOf(colonne);

      var lignes = Array.from(tableau.tBodies[0].rows);
      var ordreTri = colonne.dataset.ordreTri || 'asc';

      lignes.sort(function(a, b) {
        var contenuA = a.cells[indexColonne].textContent;
        var contenuB = b.cells[indexColonne].textContent;

        if (contenuA < contenuB) {
          return (ordreTri === 'asc') ? -1 : 1;
        } else if (contenuA > contenuB) {
          return (ordreTri === 'asc') ? 1 : -1;
        } else {
          return 0;
        }
      });

      // Inverser l'ordre de tri pour la prochaine fois
      colonne.dataset.ordreTri = (ordreTri === 'asc') ? 'desc' : 'asc';

      // Réorganiser les lignes du tableau selon l'ordre de tri
      lignes.forEach(function(ligne) {
        tableau.tBodies[0].appendChild(ligne);
      });
    }
  </script>
</head>
<body>
  <div>
    <label for="selectVille">Sélectionnez une ville :</label>
    <select id="selectVille" onchange="filtrerParVille()">
      <option value="toutes">Toutes les villes</option>
      <option value="New York">New York</option>
      <option value="London">London</option>
      <option value="Paris">Paris</option>
      <option value="Tokyo">Tokyo</option>
      <option value="rr">Null</option>
    </select>
  </div>

  <table id="tableau-donnees">
    <thead>
      <tr>
        <th onclick="trierParColonne(this)">Nom</th>
        <th onclick="trierParColonne(this)">Âge</th>
        <th onclick="trierParColonne(this)">Ville</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>John Doe</td>
        <td>25</td>
        <td>New York</td>
      </tr>
      <tr>
        <td>Jane Smith</td>
        <td>30</td>
        <td>London</td>
      </tr>
      <tr>
        <td>Mike Johnson</td>
        <td>35</td>
        <td>Paris</td>
      </tr>
      <tr>
        <td>Lisa Brown</td>
        <td>28</td>
        <td>Tokyo</td>
      </tr>
    </tbody>
  </table>

  <p id="aucune-ville-msg" class="hidden">Aucune ville ne correspond à votre demande.</p>
</body>
</html>
